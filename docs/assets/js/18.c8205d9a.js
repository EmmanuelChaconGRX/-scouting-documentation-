(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{399:function(s,a,t){"use strict";t.r(a);var e=t(29),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"_02-servidor"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_02-servidor"}},[s._v("#")]),s._v(" 02 Servidor")]),s._v(" "),t("p",[s._v("A continuación se detallaran los pasos necesarios para el despliegue de la aplicación Scouting del lado del servidor.")]),s._v(" "),t("h2",{attrs:{id:"configuracion"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#configuracion"}},[s._v("#")]),s._v(" Configuración")]),s._v(" "),t("ol",[t("li",[s._v("Para el despliegue del backend se creo un script "),t("code",[s._v("deployscouting.sh")]),s._v(" en la misma ubicación donde se habia generado el el directorio "),t("code",[s._v("scouting")]),s._v(" una vez se habia clonado el repositorio.")])]),s._v(" "),t("img",{attrs:{src:s.$withBase("/img/server/02.png")}}),s._v(" "),t("p",[s._v("El contenido del archivo "),t("code",[s._v("deployscouting.sh")]),s._v(" es el siguiente:")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# constants")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SSH_KEY")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"../bsa-sydney-dev.pem"')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# compile")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" scouting/scouting-serve "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run babel "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" scouting/scouting-client "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run build "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# define host")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("HOST")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("54.252")]),s._v(".174.218\n\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rsync")]),s._v(" -avz --delete -e "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ssh -i '),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$SSH_KEY")]),s._v('"')]),s._v(" scouting/scouting-serve/dist/*   ubuntu@"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$HOST")]),s._v(":~/scouting/ --exclude"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("node_modules --exclude"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("package.json\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rsync")]),s._v(" -avz --delete -e "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ssh -i '),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$SSH_KEY")]),s._v('"')]),s._v(" scouting/scouting-serve/package.json   ubuntu@"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$HOST")]),s._v(":~/scouting/\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rsync")]),s._v(" -avz --delete -e "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ssh -i '),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$SSH_KEY")]),s._v('"')]),s._v(" scouting/scouting-client/dist/* ubuntu@"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$HOST")]),s._v(":~/scouting/public/\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" -i "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$SSH_KEY")]),s._v("  ubuntu@"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$HOST")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cd scouting && npm install && sudo systemctl restart scouting_app.service"')]),s._v("\n")])])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("Ejecutamos el siguiente comando para correr el script y listo.")])]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("sh deployscouting.sh\n")])])]),t("h2",{attrs:{id:"base-de-datos"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#base-de-datos"}},[s._v("#")]),s._v(" Base de datos")]),s._v(" "),t("ol",[t("li",[s._v("Para conectarse a la base de datos de producción se creo un archivo llamado "),t("code",[s._v("bsa-sydney-dev.pem")]),s._v(" "),t("img",{attrs:{src:s.$withBase("/img/server/03.png")}})])]),s._v(" "),t("img",{attrs:{src:s.$withBase("/img/server/04.png")}}),s._v(" "),t("ol",{attrs:{start:"2"}},[t("li",[s._v("Conectamos al servidor de base de datos mediante el comando:")])]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('ssh -N -L 1234:bsa-scout-test-db.c0mps70m1hko.ap-southeast-2.rds.amazonaws.com:4200 ubuntu@ec2-54-252-174-218.ap-southeast-2.compute.amazonaws.com -i "bsa-sydney-dev.pem"\n')])])]),t("ol",{attrs:{start:"3"}},[t("li",[s._v("Una vez conectado al servidor de base de datos se lo puede administrar accediendo a este mediante las credenciales:")])]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("psql -h 127.0.0.1 -U bmst -d scoutingdb -p 1234\n\npass: 843sdfDFfuhgf,fgs\n")])])])])}),[],!1,null,null,null);a.default=n.exports}}]);